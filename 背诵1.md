堆的⽣⻓空间向上，地址越来越⼤；

栈的⽣⻓空间向下，地址越来越⼩。

**堆空间因为会有频繁的分配释放操作，会产⽣内存碎⽚。**不连续的空间，实际上系统中有⼀个空闲链表，当有程序申请的时候，系统遍历空闲链表找到第⼀个⼤于等于申请⼤⼩的空间分配给程序，⼀般在分配程序的时候，也会空间头部写⼊内存⼤⼩，⽅便 delete 回收空间⼤⼩。当然如果有剩余的，也会将剩余的插⼊到空闲链表中，这也是产⽣内存碎⽚的原因。

**
malloc/free**是c/c++中的**标准库函数**，**new/delete**是c++中的**运算符**

⽽由于**malloc/free是库函数⽽不是运算符**，不在**编译器的控制权限之内**，也就不饿能⾃动执⾏构造函数和析构函数。

？？？



new可以认为是malloc加构造函数的执行。new出来的指针是直接带类型信息的。而malloc返回的都是void指针。



运算符可以被重载为全局函数，也可以被重载为成员函数。一般来说，倾向于将运算符重载为成员函数，这样能够较好地体现运算符和类的关系。来看下面的例子：

```

```



c = operator+(a, b);

运算符重载为全局函数时，参数的个数等于运算符的目数（即操作数的个数）；运算符重载为成员函数时，参数的个数等于运算符的目数减一。

a.operator-(b);

由此就能看出，为什么运算符重载为成员函数时，参数个数要比运算符目数少 1 了。



\1. python是⼀种脚本语⾔，是**解释执⾏**的，⽽C++是编译语⾔，是需要**编译后在特定平台运⾏的**。python可以**很⽅便的跨平台**，但是效率没有C++⾼。



类型检查不同：define**不会进⾏安全类型检查**，⽽const会进⾏**类型安全检查**，安全性更⾼；





**修饰全局变量**：当static⽤来修饰全局变量的时候，**没有改变它的存放位置，还是在静态存储区中**。但它就改变了全局变量的作⽤域，由原来的整个工程编程本文件可见，注意：也可以在同⼀个⼯程中其它源⽂件被访问(添加 extern进⾏声明即可)。



**修饰函数**：被static修饰过的函数就是**静态函数**，静态函数只能在**本⽂件中使⽤**，**不能被其他⽂件调⽤**，也不会和其他⽂件中的同名函数冲突。情况和修饰全局变量类似。



**修饰类**：在类中，被static修饰的成员变量是类静态成员，这个静态成员会被类的多个对象共⽤。**被static修饰的成员函数也属于静态成员**，**不是属于某个对象的**，访问这个静态函数不需要引⽤对象名，⽽是**通过引⽤类名**来访问。



是的，我在看的书上原话是:“一般情况下，静态成员函数主要用来访问全局变量或同一个类中的静态数据成员，特别是和后者一起使用。”



然而静态成员变量并不保存在对象的内存布局中，而是保存在数据段中，因而没有必要用到this指针。

这种写法的优点就在于不用对进行对象实例化操作从而节省了时间和空间。



C++ Primer关于静态成员举了个例子，是说一个银行账户类需要一个数据成员来表示当前的利率。在这个类中，我们所希望的是利率与类相关联，而不是与类的每个对象相关联。这个时候就可以用静态成员函数，可以提高效率，而且一旦利率浮动，每个对象也能相应使用新的值。



村头王寡妇跟前夫孙福贵生了仨孩子，分别叫孙一孙二孙三。几年后她找到了真爱，带着三个孩子嫁给了李有财，自此三个孩子改名为李一李二李三。王寡妇跟孙福贵叮叮当当造小人儿的过程就是实例化了三个名字是“王寡妇的娃”的类（李一李二李三），类里有个叫“姓”的静态成员变量。当王寡妇改嫁时只需改动这个静态成员变量，所有娃的姓就会发生改变。由此可见，这个静态成员变量不与任何一个实例（儿子）有关，这个这个类本身（王寡妇的婚嫁情况）有关。



由于 static 修饰的类成员属于类，不属于对象，因此 static 类成员函数是没有 this 指针，this 指针是指向本对象的指针，正因为没有 this 指针，所以 static 类成员函数不能访问⾮static 的类成员，只能访问 static修饰的类成员；

static 成员函数不能被 virtual 修饰，static 成员不属于任何对象或实例，所以加上 virtual没有任何实际意义；静态成员函数没有 this 指针，虚函数的实现是为每⼀个对象分配⼀个vptr 指针，⽽ vptr 是通过 this 指针调⽤的，所以不能为 virtual；虚函数的调⽤关系，this->vptr->ctable->virtual function。

